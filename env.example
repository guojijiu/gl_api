# =============================================================================
# 配置说明
# =============================================================================
# 1. 本地开发：复制本文件为 .env，按需修改即可。
# 2. Docker 部署：同样复制为 .env。compose 里只覆盖 4 项（DATABASE_HOST、DATABASE_DRIVER、
#    DATABASE_PORT、REDIS_HOST），其余全部用本文件。使用 Docker 时请保证本文件中数据库名/
#    用户名/密码与 docker-compose 里 postgres 服务一致（如 DATABASE_NAME=cloud_platform、
#    DATABASE_USERNAME=cloud_platform、DATABASE_PASSWORD=cloud_platform_password）。
# 3. 必填：JWT_SECRET 在生产/部署前务必修改为强密钥（至少 32 字符）。
# =============================================================================
# 日志管理配置
# =============================================================================

# 全局日志配置
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=both
LOG_TIMESTAMP=true
LOG_CALLER=true
LOG_STACKTRACE=false
LOG_BASE_PATH=./storage/logs
LOG_MAX_SIZE=100
LOG_MAX_AGE=720h
LOG_MAX_BACKUPS=10
LOG_COMPRESS=true

# 请求日志配置
REQUEST_LOG_ENABLED=true
REQUEST_LOG_LEVEL=info
REQUEST_LOG_PATH=requests
REQUEST_LOG_FORMAT=json
REQUEST_LOG_INCLUDE_BODY=false
REQUEST_LOG_MAX_BODY_SIZE=1024
# REQUEST_LOG_FILTER_PATHS=/health,/metrics
# REQUEST_LOG_MASK_FIELDS=password,token,secret

# SQL日志配置
SQL_LOG_ENABLED=true
SQL_LOG_LEVEL=info
SQL_LOG_PATH=sql
SQL_LOG_FORMAT=json
SQL_LOG_SLOW_THRESHOLD=1s
SQL_LOG_INCLUDE_PARAMS=true
SQL_LOG_INCLUDE_STACK=false
SQL_LOG_MAX_QUERY_SIZE=2048

# 错误日志配置
ERROR_LOG_ENABLED=true
ERROR_LOG_LEVEL=error
ERROR_LOG_PATH=errors
ERROR_LOG_FORMAT=json
ERROR_LOG_INCLUDE_STACK=true
ERROR_LOG_NOTIFY_EMAIL=
ERROR_LOG_MAX_ERRORS=10000

# 审计日志配置
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=info
AUDIT_LOG_PATH=audit
AUDIT_LOG_FORMAT=json
AUDIT_LOG_RETENTION=8760h
AUDIT_LOG_ENCRYPT=false
AUDIT_LOG_COMPRESS=true

# 安全日志配置
SECURITY_LOG_ENABLED=true
SECURITY_LOG_LEVEL=warning
SECURITY_LOG_PATH=security
SECURITY_LOG_FORMAT=json
SECURITY_LOG_INCLUDE_IP=true
SECURITY_LOG_INCLUDE_USER=true
SECURITY_LOG_ALERT_LEVEL=error
SECURITY_LOG_REAL_TIME=true

# 业务日志配置
BUSINESS_LOG_ENABLED=true
BUSINESS_LOG_LEVEL=info
BUSINESS_LOG_PATH=business
BUSINESS_LOG_FORMAT=json
# BUSINESS_LOG_MODULES=user,post,category,tag

# 访问日志配置
ACCESS_LOG_ENABLED=true
ACCESS_LOG_LEVEL=info
ACCESS_LOG_PATH=access
ACCESS_LOG_FORMAT=json
ACCESS_LOG_INCLUDE_USER=true
ACCESS_LOG_INCLUDE_IP=true
ACCESS_LOG_INCLUDE_UA=true

# =============================================================================
# 服务器配置
# =============================================================================

# 服务器端口
SERVER_PORT=8080

# 服务器模式 (debug, release, test)
SERVER_MODE=debug

# 服务器超时时间
SERVER_TIMEOUT=30s

# 服务器读取超时
SERVER_READ_TIMEOUT=10s

# 服务器写入超时
SERVER_WRITE_TIMEOUT=10s

# 最大请求体大小 (MB)
SERVER_MAX_BODY_SIZE=10

# =============================================================================
# 数据库配置
# =============================================================================

# 数据库驱动 (mysql, postgres, sqlite)
DATABASE_DRIVER=mysql

# 数据库主机
DATABASE_HOST=localhost

# 数据库端口
DATABASE_PORT=3306

# 数据库名称
DATABASE_NAME=gin_laravel

# 数据库用户名
DATABASE_USERNAME=root

# 数据库密码
DATABASE_PASSWORD=

# 数据库字符集
DATABASE_CHARSET=utf8mb4

# 数据库连接池最大空闲连接数
DATABASE_MAX_IDLE_CONNS=10

# 数据库连接池最大打开连接数
DATABASE_MAX_OPEN_CONNS=100

# 数据库连接最大生命周期
DATABASE_CONN_MAX_LIFETIME=1h

# =============================================================================
# JWT配置
# =============================================================================

# JWT密钥 (生产环境必须修改为强密钥)
JWT_SECRET=your-super-secret-jwt-key-change-in-production-must-be-at-least-32-characters-long

# JWT过期时间
JWT_EXPIRE_HOURS=24

# JWT刷新过期时间
JWT_REFRESH_EXPIRE_HOURS=168

# JWT发行者
JWT_ISSUER=cloud-platform-api

# JWT受众
JWT_AUDIENCE=cloud-platform-users

# =============================================================================
# Redis配置
# =============================================================================

# Redis主机
REDIS_HOST=localhost

# Redis端口
REDIS_PORT=6379

# Redis密码
REDIS_PASSWORD=

# Redis数据库
REDIS_DATABASE=0

# Redis连接池大小
REDIS_POOL_SIZE=10

# Redis连接超时
REDIS_DIAL_TIMEOUT=5s

# Redis读取超时
REDIS_READ_TIMEOUT=3s

# Redis写入超时
REDIS_WRITE_TIMEOUT=3s

# =============================================================================
# 存储配置
# =============================================================================

# 存储基础路径
STORAGE_BASE_PATH=./storage

# 存储临时文件路径
STORAGE_TEMP_PATH=./storage/temp

# 存储上传文件路径
STORAGE_UPLOAD_PATH=./storage/uploads

# 存储日志文件路径
STORAGE_LOG_PATH=./storage/logs

# 存储备份文件路径
STORAGE_BACKUP_PATH=./storage/backups

# 最大文件上传大小 (MB)
STORAGE_MAX_FILE_SIZE=10

# 允许的文件类型
STORAGE_ALLOWED_TYPES=jpg,jpeg,png,gif,pdf,doc,docx

# 文件存储模式 (local, s3, oss)
STORAGE_MODE=local

# =============================================================================
# 邮件配置
# =============================================================================

# 邮件服务器主机
EMAIL_HOST=smtp.gmail.com

# 邮件服务器端口
EMAIL_PORT=587

# 邮件用户名
EMAIL_USERNAME=

# 邮件密码
EMAIL_PASSWORD=

# 邮件发件人
EMAIL_FROM=

# 是否使用TLS
EMAIL_USE_TLS=true

# 邮件超时时间
EMAIL_TIMEOUT=10s

# =============================================================================
# 安全配置
# =============================================================================

# 是否启用XSS防护
SECURITY_ENABLE_XSS_PROTECTION=true

# 是否启用SQL注入检测
SECURITY_ENABLE_SQL_INJECTION_CHECK=true

# 是否启用CSRF保护
SECURITY_ENABLE_CSRF_PROTECTION=true

# 是否启用速率限制
SECURITY_ENABLE_RATE_LIMIT=true

# 是否启用IP白名单
SECURITY_ENABLE_IP_WHITELIST=false

# 是否启用请求大小限制
SECURITY_ENABLE_REQUEST_SIZE_LIMIT=true

# 是否启用文件类型验证
SECURITY_ENABLE_FILE_TYPE_VALIDATION=true

# =============================================================================
# 监控配置
# =============================================================================

# 是否启用健康检查
MONITORING_ENABLE_HEALTH_CHECK=true

# 是否启用性能监控
MONITORING_ENABLE_PERFORMANCE_MONITORING=true

# 是否启用错误监控
MONITORING_ENABLE_ERROR_MONITORING=true

# 是否启用慢查询监控
MONITORING_ENABLE_SLOW_QUERY_MONITORING=true

# 是否启用资源使用监控
MONITORING_ENABLE_RESOURCE_MONITORING=true

# 监控数据保留时间
MONITORING_DATA_RETENTION=168h

# =============================================================================
# 缓存配置
# =============================================================================

# 是否启用缓存
CACHE_ENABLED=true

# 缓存前缀
CACHE_PREFIX=app:

# 缓存默认TTL
CACHE_DEFAULT_TTL=5m

# 缓存最大TTL
CACHE_MAX_TTL=1h

# 缓存预热
CACHE_WARM_UP=true

# 缓存统计
CACHE_STATISTICS=true

# =============================================================================
# 备份配置
# =============================================================================

# 是否启用自动备份
BACKUP_ENABLED=true

# 备份频率
BACKUP_FREQUENCY=24h

# 备份保留时间
BACKUP_RETENTION=168h

# 备份压缩
BACKUP_COMPRESS=true

# 备份加密
BACKUP_ENCRYPT=false

# 备份通知邮箱
BACKUP_NOTIFY_EMAIL=

# =============================================================================
# 告警配置
# =============================================================================

# 是否启用告警
ALERT_ENABLED=true

# 告警级别
ALERT_LEVEL=warning

# 告警通知邮箱
ALERT_NOTIFY_EMAIL=

# 告警重试次数
ALERT_RETRY_COUNT=3

# 告警重试间隔
ALERT_RETRY_INTERVAL=5m

# 告警静默期
ALERT_SILENCE_PERIOD=10m

# =============================================================================
# 性能监控系统配置
# =============================================================================

# 基础监控配置
PERF_MON_ENABLED=true               # 是否启用性能监控
PERF_MON_INTERVAL=30s               # 监控间隔
PERF_MON_RETENTION=168h             # 数据保留时间(7天)
PERF_MON_BATCH_SIZE=100             # 批量处理大小
PERF_MON_VERBOSE=false              # 详细日志

# 系统资源监控配置
PERF_MON_SYSTEM_ENABLED=true        # 是否启用系统资源监控
PERF_MON_CPU_ENABLED=true           # 是否启用CPU监控
PERF_MON_CPU_THRESHOLD=80.0         # CPU使用率阈值(%)
PERF_MON_CPU_CORES=-1               # 监控核心数(-1为自动检测)
PERF_MON_MEMORY_ENABLED=true        # 是否启用内存监控
PERF_MON_MEMORY_THRESHOLD=85.0      # 内存使用率阈值(%)
PERF_MON_MEMORY_LEAK_DETECTION=true # 是否启用内存泄漏检测
PERF_MON_DISK_ENABLED=true          # 是否启用磁盘监控
PERF_MON_DISK_THRESHOLD=90.0        # 磁盘使用率阈值(%)
PERF_MON_DISK_IO=true               # 是否启用磁盘IO监控
PERF_MON_NETWORK_ENABLED=true       # 是否启用网络监控
PERF_MON_NETWORK_BANDWIDTH=104857600 # 带宽阈值(100MB/s)

# 应用性能监控配置
PERF_MON_APP_ENABLED=true           # 是否启用应用性能监控
PERF_MON_HTTP_ENABLED=true          # 是否启用HTTP监控
PERF_MON_HTTP_RESPONSE_TIME=1s      # HTTP响应时间阈值
PERF_MON_HTTP_ERROR_RATE=0.05       # HTTP错误率阈值(5%)
PERF_MON_HTTP_DETAILS=true          # 是否记录请求详情
PERF_MON_DB_ENABLED=true            # 是否启用数据库监控
PERF_MON_DB_POOL=true               # 是否启用连接池监控
PERF_MON_DB_QUERY=true              # 是否启用查询性能监控
PERF_MON_DB_SLOW_THRESHOLD=1s       # 慢查询阈值
PERF_MON_CACHE_ENABLED=true         # 是否启用缓存监控
PERF_MON_CACHE_HIT_RATE=0.8         # 缓存命中率阈值(80%)
PERF_MON_CACHE_MEMORY=true          # 是否启用缓存内存监控
PERF_MON_GO_ENABLED=true            # 是否启用Go运行时监控
PERF_MON_GO_GC=true                 # 是否启用GC监控
PERF_MON_GO_GOROUTINE=true          # 是否启用Goroutine监控
PERF_MON_GO_HEAP=true               # 是否启用堆内存监控

# 业务指标监控配置
PERF_MON_BUSINESS_ENABLED=true      # 是否启用业务指标监控
PERF_MON_USER_ACTIVITY_ENABLED=true # 是否启用用户活动监控
PERF_MON_USER_THRESHOLD=1000        # 活跃用户阈值
PERF_MON_SESSION_TIMEOUT=30m        # 会话超时时间
PERF_MON_API_USAGE_ENABLED=true     # 是否启用API使用监控
PERF_MON_API_RATE_LIMIT=true        # 是否启用API速率限制监控
PERF_MON_API_POPULAR=true           # 是否启用热门API监控

# 告警配置
PERF_MON_ALERTS_ENABLED=true        # 是否启用告警
PERF_MON_ALERT_MAX=10               # 最大告警次数
PERF_MON_ALERT_WINDOW=1h            # 告警时间窗口
PERF_MON_ALERT_COOLDOWN=5m          # 告警冷却时间

# 存储配置
PERF_MON_STORAGE_TYPE=memory        # 存储类型(memory,redis,influxdb,prometheus)
PERF_MON_STORAGE_COMPRESSION=true   # 是否启用数据压缩
PERF_MON_STORAGE_BATCH_SIZE=100     # 批量写入大小

# =============================================================================
# WebSocket实时通信系统配置
# =============================================================================

# 基础连接配置
WS_READ_BUFFER_SIZE=1024         # 读取缓冲区大小(字节)
WS_WRITE_BUFFER_SIZE=1024        # 写入缓冲区大小(字节)
WS_PING_PERIOD=60s               # 心跳检测间隔
WS_PONG_WAIT=10s                 # Pong响应等待时间
WS_WRITE_WAIT=10s                # 写入超时时间
WS_MAX_MESSAGE_SIZE=512          # 最大消息大小(字节)
WS_ENABLE_COMPRESSION=true       # 是否启用压缩

# 连接管理配置
WS_MAX_CONNECTIONS=10000         # 最大连接数
WS_ENABLE_RATE_LIMIT=true        # 是否启用速率限制
WS_RATE_LIMIT_PER_MINUTE=1000   # 每分钟速率限制

# 安全配置
WS_ENABLE_IP_WHITELIST=false     # 是否启用IP白名单
WS_ENABLE_ORIGIN_CHECK=true      # 是否启用来源检查

# 房间管理配置
WS_ENABLE_ROOM_LIMIT=true        # 是否启用房间数量限制
WS_MAX_ROOMS=100                 # 最大房间数量

# 消息管理配置
WS_ENABLE_MESSAGE_PERSISTENCE=false  # 是否启用消息持久化
WS_MESSAGE_RETENTION_DAYS=30        # 消息保留天数
WS_MAX_MESSAGE_LENGTH=1000          # 最大消息长度
WS_ENABLE_MESSAGE_FILTER=true       # 是否启用消息过滤

# 用户状态配置
WS_ENABLE_USER_STATUS=true       # 是否启用用户状态管理
WS_USER_STATUS_TIMEOUT=5m        # 用户状态超时时间
WS_ENABLE_USER_PRESENCE=true     # 是否启用用户在线状态

# 统计和监控配置
WS_ENABLE_STATISTICS=true        # 是否启用统计信息
WS_STATISTICS_INTERVAL=1m        # 统计信息收集间隔
WS_ENABLE_PERFORMANCE_METRICS=true  # 是否启用性能指标
WS_ENABLE_ALERTS=false           # 是否启用告警

# 高级功能配置
WS_ENABLE_LOAD_BALANCING=false   # 是否启用负载均衡
WS_ENABLE_MESSAGE_QUEUE=false    # 是否启用消息队列
WS_ENABLE_MESSAGE_BROADCAST=true # 是否启用消息广播
WS_ENABLE_PRIVATE_MESSAGING=true # 是否启用私聊消息

# =============================================================================
# 安全防护系统配置
# =============================================================================

# 基础安全配置
SECURITY_ENABLED=true                    # 是否启用安全防护
SECURITY_SESSION_TIMEOUT=30m             # 会话超时时间
SECURITY_MAX_LOGIN_ATTEMPTS=5            # 最大登录尝试次数
SECURITY_LOGIN_LOCKOUT_DURATION=15m      # 登录锁定时间
SECURITY_PASSWORD_HISTORY_COUNT=5        # 密码历史记录数量
SECURITY_FORCE_PASSWORD_CHANGE=false     # 是否强制密码更改
SECURITY_PASSWORD_CHANGE_INTERVAL=2160h  # 密码更改间隔(90天)
SECURITY_ACCOUNT_LOCKOUT_THRESHOLD=10    # 账户锁定阈值
SECURITY_ACCOUNT_LOCKOUT_DURATION=1h     # 账户锁定时间
SECURITY_INACTIVE_ACCOUNT_TIMEOUT=4320h  # 非活跃账户超时(180天)
SECURITY_CONCURRENT_SESSION_LIMIT=3      # 并发会话限制
SECURITY_IP_WHITELIST_ENABLED=false      # 是否启用IP白名单
SECURITY_IP_BLACKLIST_ENABLED=true       # 是否启用IP黑名单
SECURITY_RATE_LIMIT_ENABLED=true         # 是否启用速率限制
SECURITY_RATE_LIMIT_REQUESTS=100         # 速率限制请求数
SECURITY_RATE_LIMIT_WINDOW=1m            # 速率限制时间窗口

# 密码策略配置
SECURITY_PASSWORD_MIN_LENGTH=8           # 最小长度
SECURITY_PASSWORD_MAX_LENGTH=128         # 最大长度
SECURITY_PASSWORD_REQUIRE_UPPERCASE=true # 要求大写字母
SECURITY_PASSWORD_REQUIRE_LOWERCASE=true # 要求小写字母
SECURITY_PASSWORD_REQUIRE_NUMBERS=true   # 要求数字
SECURITY_PASSWORD_REQUIRE_SPECIAL_CHARS=true # 要求特殊字符
SECURITY_PASSWORD_SPECIAL_CHARS_LIST="!@#$%^&*()_+-=[]{}|;:,.<>?" # 特殊字符列表
SECURITY_PASSWORD_PREVENT_COMMON=true    # 防止常见密码
SECURITY_PASSWORD_COMMON_FILE="config/common_passwords.txt" # 常见密码文件
SECURITY_PASSWORD_PREVENT_USERNAME=true # 防止用户名出现在密码中
SECURITY_PASSWORD_PREVENT_SEQUENTIAL=true # 防止连续字符
SECURITY_PASSWORD_PREVENT_REPEATED=true # 防止重复字符
SECURITY_PASSWORD_MAX_REPEATED_CHARS=3   # 最大重复字符数
SECURITY_PASSWORD_STRENGTH_THRESHOLD=70  # 密码强度阈值

# 访问控制配置
SECURITY_RBAC_ENABLED=true               # 是否启用RBAC
SECURITY_PERMISSION_CACHE_ENABLED=true  # 是否启用权限缓存
SECURITY_PERMISSION_CACHE_TTL=5m        # 权限缓存TTL
SECURITY_DEFAULT_DENY_POLICY=true       # 默认拒绝策略
SECURITY_RESOURCE_LEVEL_ACCESS=true     # 资源级访问控制
SECURITY_TIME_BASED_ACCESS=false        # 基于时间的访问控制
SECURITY_LOCATION_BASED_ACCESS=false    # 基于位置的访问控制
SECURITY_DEVICE_BASED_ACCESS=false      # 基于设备的访问控制
SECURITY_SESSION_BASED_ACCESS=true      # 基于会话的访问控制
SECURITY_API_KEY_PERMISSIONS=true       # API密钥权限
SECURITY_JWT_CLAIMS_VALIDATION=true     # JWT声明验证
SECURITY_TOKEN_REFRESH_ENABLED=true     # 是否启用令牌刷新
SECURITY_TOKEN_REFRESH_THRESHOLD=5m     # 令牌刷新阈值

# 异常检测配置
SECURITY_ANOMALY_DETECTION_ENABLED=true  # 是否启用异常检测
SECURITY_ANOMALY_LEARNING_MODE=true     # 学习模式
SECURITY_ANOMALY_LEARNING_PERIOD=168h   # 学习周期(7天)
SECURITY_ANOMALY_THRESHOLD=0.8          # 异常阈值
SECURITY_ANOMALY_BEHAVIORAL_ANALYSIS=true # 行为分析
SECURITY_ANOMALY_PATTERN_RECOGNITION=true # 模式识别
SECURITY_ANOMALY_ML_ENABLED=false       # 机器学习
SECURITY_ANOMALY_ML_MODEL_PATH="models/anomaly_detection.model" # ML模型路径
SECURITY_ANOMALY_ML_TRAINING_DATA_PATH="data/training/" # ML训练数据路径
SECURITY_ANOMALY_REAL_TIME_ANALYSIS=true # 实时分析
SECURITY_ANOMALY_BATCH_ANALYSIS=true    # 批量分析
SECURITY_ANOMALY_ANALYSIS_INTERVAL=5m   # 分析间隔
SECURITY_ANOMALY_ALERT_ON_ANOMALY=true  # 异常时告警
SECURITY_ANOMALY_AUTO_BLOCK=false       # 异常时自动阻止
SECURITY_ANOMALY_SCORE_THRESHOLD=0.7    # 异常分数阈值

# 安全审计配置
SECURITY_AUDIT_ENABLED=true              # 是否启用安全审计
SECURITY_AUDIT_LEVEL=medium              # 审计级别
SECURITY_AUDIT_EVENTS=login,logout,password_change,permission_change,data_access,admin_action # 审计事件
SECURITY_AUDIT_DATA_RETENTION=8760h     # 数据保留时间(1年)
SECURITY_AUDIT_ENCRYPTION_ENABLED=true  # 是否启用加密
SECURITY_AUDIT_ENCRYPTION_KEY=""        # 加密密钥
SECURITY_AUDIT_COMPRESSION_ENABLED=true # 是否启用压缩
SECURITY_AUDIT_REAL_TIME_MONITORING=true # 实时监控
SECURITY_AUDIT_ALERT_ON_SUSPICIOUS=true # 可疑活动告警
SECURITY_AUDIT_COMPLIANCE_REPORTING=true # 合规报告
SECURITY_AUDIT_REPORT_GENERATION=true   # 报告生成
SECURITY_AUDIT_REPORT_SCHEDULE=weekly   # 报告计划
SECURITY_AUDIT_DATA_EXPORT_ENABLED=true # 数据导出
SECURITY_AUDIT_DATA_EXPORT_FORMAT=json  # 数据导出格式

# 威胁防护配置
SECURITY_THREAT_PROTECTION_ENABLED=true # 是否启用威胁防护
SECURITY_THREAT_INTELLIGENCE=true       # 威胁情报
SECURITY_THREAT_TI_UPDATE_INTERVAL=24h  # TI更新间隔
SECURITY_THREAT_TI_SOURCE_URLS=https://api.abuseipdb.com/api/v2/blacklist,https://api.blocklist.de/get.php # TI源URL
SECURITY_THREAT_MALWARE_SCANNING=true   # 恶意软件扫描
SECURITY_THREAT_SCAN_INTERVAL=1h       # 扫描间隔
SECURITY_THREAT_VIRUS_TOTAL_API_KEY="" # VirusTotal API密钥
SECURITY_THREAT_PHISHING_PROTECTION=true # 钓鱼防护
SECURITY_THREAT_PHISHING_URLS_FILE="config/phishing_urls.txt" # 钓鱼URL文件
SECURITY_THREAT_SQL_INJECTION_PROTECTION=true # SQL注入防护
SECURITY_THREAT_XSS_PROTECTION=true     # XSS防护
SECURITY_THREAT_CSRF_PROTECTION=true    # CSRF防护
SECURITY_THREAT_CSRF_TOKEN_EXPIRY=30m  # CSRF令牌过期时间
SECURITY_THREAT_FILE_UPLOAD_SCANNING=true # 文件上传扫描
SECURITY_THREAT_ALLOWED_FILE_TYPES=.jpg,.jpeg,.png,.gif,.pdf,.doc,.docx,.txt # 允许的文件类型
SECURITY_THREAT_MAX_FILE_SIZE=10485760  # 最大文件大小(10MB)
SECURITY_THREAT_BLOCKED_FILE_TYPES=.exe,.bat,.cmd,.com,.pif,.scr,.vbs,.js # 阻止的文件类型
SECURITY_THREAT_CONTENT_SECURITY_POLICY=true # 内容安全策略
SECURITY_THREAT_CSP_DIRECTIVES="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline';" # CSP指令

# =============================================================================
# 监控告警系统配置
# =============================================================================

# 基础监控配置
MONITORING_ENABLED=true                    # 是否启用监控告警
MONITORING_CHECK_INTERVAL=30s              # 检查间隔
MONITORING_RETENTION_PERIOD=720h           # 数据保留时间(30天)
MONITORING_MAX_ALERTS_PER_HOUR=100         # 每小时最大告警数
MONITORING_ALERT_COOLDOWN=5m               # 告警冷却时间
MONITORING_ENABLE_DASHBOARD=true           # 是否启用仪表板
MONITORING_DASHBOARD_PORT=8081             # 仪表板端口
MONITORING_ENABLE_METRICS=true             # 是否启用指标收集
MONITORING_METRICS_PORT=8082               # 指标端口

# 系统监控配置
MONITORING_SYSTEM_ENABLED=true             # 是否启用系统监控
MONITORING_SYSTEM_CHECK_INTERVAL=60s       # 检查间隔
MONITORING_SYSTEM_CPU_THRESHOLD=80.0       # CPU阈值
MONITORING_SYSTEM_MEMORY_THRESHOLD=85.0    # 内存阈值
MONITORING_SYSTEM_DISK_THRESHOLD=90.0      # 磁盘阈值
MONITORING_SYSTEM_NETWORK_THRESHOLD=1000.0 # 网络阈值(MB/s)
MONITORING_SYSTEM_PROCESS_THRESHOLD=1000   # 进程阈值
MONITORING_SYSTEM_LOAD_AVERAGE_THRESHOLD=5.0 # 负载阈值

# 应用监控配置
MONITORING_APP_ENABLED=true                # 是否启用应用监控
MONITORING_APP_CHECK_INTERVAL=30s          # 检查间隔
MONITORING_APP_RESPONSE_TIME_THRESHOLD=2s  # 响应时间阈值
MONITORING_APP_ERROR_RATE_THRESHOLD=5.0    # 错误率阈值
MONITORING_APP_THROUGHPUT_THRESHOLD=1000   # 吞吐量阈值
MONITORING_APP_MEMORY_LEAK_THRESHOLD=10.0  # 内存泄漏阈值
MONITORING_APP_GOROUTINE_THRESHOLD=10000   # Goroutine阈值
MONITORING_APP_GC_THRESHOLD=100ms          # GC阈值

# 数据库监控配置
MONITORING_DB_ENABLED=true                 # 是否启用数据库监控
MONITORING_DB_CHECK_INTERVAL=60s           # 检查间隔
MONITORING_DB_CONNECTION_THRESHOLD=100     # 连接数阈值
MONITORING_DB_SLOW_QUERY_THRESHOLD=1s      # 慢查询阈值
MONITORING_DB_QUERY_TIMEOUT_THRESHOLD=30s  # 查询超时阈值
MONITORING_DB_DEADLOCK_THRESHOLD=5         # 死锁阈值
MONITORING_DB_LOCK_WAIT_THRESHOLD=10s     # 锁等待阈值
MONITORING_DB_TABLE_SIZE_THRESHOLD=1073741824 # 表大小阈值(1GB)

# 缓存监控配置
MONITORING_CACHE_ENABLED=true              # 是否启用缓存监控
MONITORING_CACHE_CHECK_INTERVAL=60s       # 检查间隔
MONITORING_CACHE_HIT_RATE_THRESHOLD=80.0   # 命中率阈值
MONITORING_CACHE_MEMORY_USAGE_THRESHOLD=85.0 # 内存使用阈值
MONITORING_CACHE_CONNECTION_THRESHOLD=100  # 连接数阈值
MONITORING_CACHE_EVICTION_THRESHOLD=1000  # 驱逐阈值
MONITORING_CACHE_EXPIRED_KEYS_THRESHOLD=10000 # 过期键阈值

# 业务监控配置
MONITORING_BUSINESS_ENABLED=true           # 是否启用业务监控
MONITORING_BUSINESS_CHECK_INTERVAL=5m     # 检查间隔
MONITORING_BUSINESS_USER_ACTIVITY_THRESHOLD=100 # 用户活动阈值
MONITORING_BUSINESS_API_USAGE_THRESHOLD=1000 # API使用阈值
MONITORING_BUSINESS_ERROR_LOG_THRESHOLD=50 # 错误日志阈值
MONITORING_BUSINESS_SECURITY_EVENT_THRESHOLD=10 # 安全事件阈值
MONITORING_BUSINESS_DATA_SYNC_THRESHOLD=10m # 数据同步阈值

# 告警配置
MONITORING_ALERT_ENABLED=true              # 是否启用告警
MONITORING_ALERT_DEFAULT_SEVERITY=warning # 默认严重程度
MONITORING_ALERT_ESCALATION_ENABLED=true  # 是否启用升级
MONITORING_ALERT_ESCALATION_DELAY=10m     # 升级延迟
MONITORING_ALERT_MAX_ESCALATION_LEVEL=3   # 最大升级级别
MONITORING_ALERT_AUTO_RESOLVE_ENABLED=true # 是否启用自动解决
MONITORING_ALERT_AUTO_RESOLVE_DELAY=30m   # 自动解决延迟
MONITORING_ALERT_SUPPRESSION_ENABLED=true # 是否启用抑制
MONITORING_ALERT_SUPPRESSION_WINDOW=1h    # 抑制窗口

# 邮件通知配置
MONITORING_NOTIFICATION_EMAIL_ENABLED=false # 是否启用邮件通知
MONITORING_NOTIFICATION_EMAIL_SMTP_HOST=smtp.example.com
MONITORING_NOTIFICATION_EMAIL_SMTP_PORT=587
MONITORING_NOTIFICATION_EMAIL_USERNAME=user@example.com
MONITORING_NOTIFICATION_EMAIL_PASSWORD=password
MONITORING_NOTIFICATION_EMAIL_FROM_ADDRESS=monitoring@example.com
MONITORING_NOTIFICATION_EMAIL_TO_ADDRESSES=admin@example.com
MONITORING_NOTIFICATION_EMAIL_SUBJECT="[监控告警] Cloud Platform"

# Webhook通知配置
MONITORING_NOTIFICATION_WEBHOOK_ENABLED=false # 是否启用Webhook通知
MONITORING_NOTIFICATION_WEBHOOK_URL=https://api.example.com/webhook
MONITORING_NOTIFICATION_WEBHOOK_METHOD=POST
MONITORING_NOTIFICATION_WEBHOOK_HEADERS=Content-Type:application/json
MONITORING_NOTIFICATION_WEBHOOK_TIMEOUT=10s
MONITORING_NOTIFICATION_WEBHOOK_RETRY_COUNT=3

# Slack通知配置
MONITORING_NOTIFICATION_SLACK_ENABLED=false # 是否启用Slack通知
MONITORING_NOTIFICATION_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxx
MONITORING_NOTIFICATION_SLACK_CHANNEL=#monitoring
MONITORING_NOTIFICATION_SLACK_USERNAME=监控告警
MONITORING_NOTIFICATION_SLACK_ICON_EMOJI=:warning:

# 钉钉通知配置
MONITORING_NOTIFICATION_DINGTALK_ENABLED=false # 是否启用钉钉通知
MONITORING_NOTIFICATION_DINGTALK_WEBHOOK_URL=https://oapi.dingtalk.com/robot/send?access_token=xxx
MONITORING_NOTIFICATION_DINGTALK_SECRET=secret
MONITORING_NOTIFICATION_DINGTALK_AT_MOBILES=13800138000

# 短信通知配置
MONITORING_NOTIFICATION_SMS_ENABLED=false # 是否启用短信通知
MONITORING_NOTIFICATION_SMS_PROVIDER=aliyun
MONITORING_NOTIFICATION_SMS_API_KEY=your_api_key
MONITORING_NOTIFICATION_SMS_API_SECRET=your_api_secret
MONITORING_NOTIFICATION_SMS_PHONE_NUMBERS=13800138000

# 存储配置
MONITORING_STORAGE_TYPE=database           # 存储类型
MONITORING_STORAGE_DATABASE_ENABLED=true  # 是否启用数据库存储
MONITORING_STORAGE_DATABASE_TABLE_PREFIX=monitoring_ # 表前缀
MONITORING_STORAGE_DATABASE_RETENTION=2160h # 数据保留时间(90天)
MONITORING_STORAGE_FILE_ENABLED=false     # 是否启用文件存储
MONITORING_STORAGE_FILE_PATH=logs/monitoring # 文件路径
MONITORING_STORAGE_FILE_FORMAT=json       # 文件格式
MONITORING_STORAGE_FILE_MAX_SIZE=104857600 # 最大文件大小(100MB)
MONITORING_STORAGE_FILE_MAX_AGE=720h      # 最大文件年龄(30天)
MONITORING_STORAGE_REDIS_ENABLED=false    # 是否启用Redis存储
MONITORING_STORAGE_REDIS_KEY_PREFIX=monitoring: # 键前缀
MONITORING_STORAGE_REDIS_TTL=24h          # TTL时间

